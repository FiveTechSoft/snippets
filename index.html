<html>

<head>
  <title>mod_harbour snippets</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, shrink-to-fit=no">
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css'>
   <script src="https://fivetechsoft.github.io/xcloud/source/js/xcloud.js"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
   <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
   <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>

   <style>
   </style>

   <script>
      var editor;
	   
      function Run()
      {
	 var o = new Object();

	 o[ 'source' ] = editor.getValue();
	 console.log( 'PARAM', o );

	 $.post( "https://harbour.fourtech.es/modharbour_samples/snippets/run.prg", o )
	    .done( function( data ) { console.log( 'DONE', data ); $('#result').html( data ); } )
	    .fail( function( data ) { console.log( 'ERROR', data ); } ); 
      }	   
	   
      function Save()
      {
          var o = new Object();
      
          o[ 'source' ] = editor.getValue();
          console.log( 'PARAM', o );
                
          $.post( "https://harbour.fourtech.es/modharbour_samples/snippets/id.prg", o )
            .done( function( data ){ 
	       console.log( 'DONE', data ); $('#result').html( "https://fivetechsoft.github.io/snippets?" + data ); } )
            .fail( function( data ) { console.log( 'ERROR', data ); } ); 
      }
	   
      function GetCode()
      {
          $.get( "https://harbour.fourtech.es/modharbour_samples/snippets/id.prg?src="+ window.location.search.substring( 1 ) )
            .done( function( data ) { console.log( 'DONE', data ); editor.setValue( data, -1 ); } )
            .fail( function( data ) { console.log( 'ERROR', data ); } ); 	 
      }	      
   </script>  
</head>

<body>
   <div class="container-fluid" style="padding:0px;overflow:hidden;">
      <div class="row">
         <div class="col-md-12">
	    <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-dark bg-dark" style="height:50px;">
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		   <span class="navbar-toggler-icon"></span>
		      </button> <a class="navbar-brand" style="cursor:pointer;color:aquamarine;" onclick="location.href='https://fivetechsoft.github.io/mod_harbour/'">mod_harbour snippets</a>
		         <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			    <ul class="navbar-nav">
				<li class="nav-item active">
			           <a class="nav-link" style="cursor:pointer;" onclick="Run();">Run<span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item active">
				   <a class="nav-link" style="cursor:pointer;" onclick="Save();">Save</a>
				</li>
				      </ul>
				      <form class="form-inline" style="margin-top:15px;padding-left:50px;">
					  <input class="form-control mr-sm-2" type="text" /> 
					  <button class="btn btn-primary my-2 my-sm-0" type="submit">
					     clear
				          </button>
				       </form>
				       <ul class="navbar-nav ml-md-auto">
				       <li class="nav-item active">
				          <a class="nav-link" href="#">Templates<span class="sr-only">(current)</span></a>
				       </li>
				       <li class="nav-item dropdown">
				       <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown">Information</a>
				       <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
				          <a class="dropdown-item" href="http://forums.fivetechsupport.com/viewforum.php?f=45&start=0">mod_harbour forums</a> 
				          <a class="dropdown-item" href="https://app.slack.com/client/TJH5YU202/CJUHF8SBX">mod_harbour live chat</a> 
				          <a class="dropdown-item" href="https://github.com/FiveTechSoft/mod_harbour">mod_harbour github</a>
				       <div class="dropdown-divider">
				       </div> <a class="dropdown-item" href="https://harbour.github.io">The Harbour Project</a>
				    </div>
			         </li>
			      </ul>
			   </div>
			</nav>
		    </div>
		</div>
		<div class="row" style="height:calc( 100% - 50px );">
			<div class="col-md-7" style="padding:0px;height:110%;"> 
			      
          <div id="editor" style="height:calc(100% - 50px);">function Main()

   ? "Hello world"

return nil
</div>
          <script src="https://fivetechsoft.github.io/xcloud/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
          <script>
             editor = ace.edit("editor");
             editor.setTheme("ace/theme/tomorrow_night_blue");
             editor.setFontSize(18);     
             editor.setHighlightActiveLine(true);
             editor.session.setMode("ace/mode/c_cpp");
          </script>
	</div>
	<div id="result" class="col-md-5" style="overflow:auto;background-color: aquamarine;padding:0px;height:100%;">
	</div>  
      </div>
    </div>
    <script>GetCode();</script>	
</body> 
</html>
